<template>
  <div class="relative min-h-screen overflow-hidden">
    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <div
      class="
        relative z-10 mx-auto max-w-7xl px-4 py-12
        sm:px-6
        lg:px-8
      "
    >
      <div
        class="
          grid grid-cols-1 gap-6
          lg:grid-cols-3
        "
      >
        <!-- å·¦ä¾§ä¸»å¡ç‰‡ - æ¬¢è¿ä¿¡æ¯ -->
        <div class="lg:col-span-2">
          <div
            class="
              group relative h-full rounded-3xl border border-background bg-background p-8
              shadow-[6px_6px_12px_#c5c5c5,-6px_-6px_12px_#ffffff] transition-all duration-300
              hover:shadow-[8px_8px_16px_#c5c5c5,-8px_-8px_16px_#ffffff]
              dark:shadow-[6px_6px_12px_#0d0d0d,-6px_-6px_12px_#272727]
              dark:hover:shadow-[8px_8px_16px_#0d0d0d,-8px_-8px_16px_#272727]
            "
          >
            <!-- ä¸»é¢˜åˆ‡æ¢æŒ‰é’® - å¡ç‰‡å³ä¸Šè§’ -->
            <div class="absolute top-4 right-4">
              <SwitchDark />
            </div>
            <div class="flex flex-col items-center justify-center space-y-6 text-center">
              <!-- è£…é¥°æ€§å›¾æ ‡ - æ‹Ÿæ€å†…å‡¹æ•ˆæœ -->
              <div
                class="
                  flex size-32 items-center justify-center rounded-full bg-background
                  shadow-[inset_4px_4px_12px_#c5c5c5,inset_-4px_-4px_12px_#ffffff]
                  dark:shadow-[inset_4px_4px_12px_#0d0d0d,inset_-4px_-4px_12px_#272727]
                "
              >
                <SvgIcon
                  icon="mdi:vuejs"
                  class="text-6xl text-[#42b883]"
                />
              </div>

              <!-- æ¬¢è¿æ–‡å­— -->
              <div class="space-y-2">
                <h1
                  class="
                    text-4xl font-bold text-gray-800
                    sm:text-5xl
                    dark:text-gray-100
                  "
                >
                  {{ greeting }}
                </h1>
                <p
                  class="
                    text-xl text-gray-600
                    dark:text-gray-300
                  "
                >
                  Welcome to
                  <span class="ml-2 font-semibold text-primary">Vue Starter Template</span>
                </p>
              </div>

              <!-- é¡¹ç›®ä»‹ç» -->
              <p
                class="
                  max-w-2xl text-base/relaxed text-gray-600
                  dark:text-gray-400
                "
              >
                è¿™æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„ Vue é¡¹ç›®æ¨¡æ¿,é›†æˆäº† Vue Routerã€Piniaã€Tailwind CSS ç­‰æœ€æ–°æŠ€æœ¯æ ˆã€‚é‡‡ç”¨ TypeScript å¼€å‘,æ”¯æŒ Dark Mode,å†…ç½®å›½é™…åŒ–æ–¹æ¡ˆ,ä¸ºä½ çš„é¡¹ç›®æä¾›æœ€ä½³çš„å¼€å‘ä½“éªŒã€‚
              </p>

              <!-- ç‰¹æ€§æ ‡ç­¾ - æ‹Ÿæ€å‡¸èµ·æ•ˆæœ -->
              <div class="flex flex-wrap justify-center gap-3">
                <span
                  v-for="tag in tags"
                  :key="tag"
                  :class="cn(
                    `
                      cursor-pointer rounded-full border px-4 py-2 text-sm font-medium
                      transition-all duration-300
                    `,
                    'border-background bg-background text-gray-700',
                    'shadow-[4px_4px_8px_#c5c5c5,-4px_-4px_8px_#ffffff]',
                    'active:shadow-[inset_2px_2px_6px_#c5c5c5,inset_-2px_-2px_6px_#ffffff]',
                    'dark:text-gray-300',
                    'dark:shadow-[4px_4px_8px_#0d0d0d,-4px_-4px_8px_#272727]',
                    'dark:active:shadow-[inset_2px_2px_6px_#0d0d0d,inset_-2px_-2px_6px_#272727]',
                  )"
                >
                  {{ tag }}
                </span>
              </div>
            </div>
          </div>
        </div>

        <!-- å³ä¾§å¡ç‰‡ç»„ -->
        <div class="space-y-6">
          <!-- å¿«é€Ÿå¼€å§‹å¡ç‰‡ -->
          <div
            class="
              group rounded-3xl border border-background bg-background p-6
              shadow-[6px_6px_12px_#c5c5c5,-6px_-6px_12px_#ffffff] transition-all duration-300
              hover:shadow-[8px_8px_16px_#c5c5c5,-8px_-8px_16px_#ffffff]
              dark:shadow-[6px_6px_12px_#0d0d0d,-6px_-6px_12px_#272727]
              dark:hover:shadow-[8px_8px_16px_#0d0d0d,-8px_-8px_16px_#272727]
            "
          >
            <h2
              class="
                mb-4 flex items-center gap-2 text-xl font-semibold text-gray-800
                dark:text-gray-100
              "
            >
              <span class="text-2xl">ğŸš€</span>
              å¿«é€Ÿå¼€å§‹
            </h2>
            <div class="grid grid-cols-3 gap-3">
              <!-- å¤åˆ¶å‘½ä»¤æŒ‰é’® -->
              <div
                class="
                  group/btn relative flex cursor-pointer flex-col items-center gap-2 rounded-lg
                  border border-background bg-background p-4
                  shadow-[4px_4px_8px_#c5c5c5,-4px_-4px_8px_#ffffff] transition-all duration-300
                  hover:shadow-[6px_6px_12px_#c5c5c5,-6px_-6px_12px_#ffffff]
                  active:shadow-[inset_2px_2px_6px_#c5c5c5,inset_-2px_-2px_6px_#ffffff]
                  dark:shadow-[4px_4px_8px_#0d0d0d,-4px_-4px_8px_#272727]
                  dark:hover:shadow-[6px_6px_12px_#0d0d0d,-6px_-6px_12px_#272727]
                  dark:active:shadow-[inset_2px_2px_6px_#0d0d0d,inset_-2px_-2px_6px_#272727]
                "
                @click="copyToClipboard('pnpm create lemon project -t vue', 'command')"
              >
                <SvgIcon
                  icon="mdi:content-copy"
                  class="
                    text-2xl text-gray-600
                    dark:text-gray-400
                  "
                />
                <span
                  class="
                    text-xs font-medium text-gray-700
                    dark:text-gray-300
                  "
                >
                  å¤åˆ¶å‘½ä»¤
                </span>
                <span
                  v-if="copiedText === 'command'"
                  class="
                    absolute -top-2 -right-2 rounded-full bg-primary px-2 py-0.5 text-xs text-white
                  "
                >
                  âœ“
                </span>
              </div>

              <!-- åˆ›å»ºä»“åº“æŒ‰é’® -->
              <div
                class="
                  group/btn relative flex cursor-pointer flex-col items-center gap-2 rounded-lg
                  border border-background bg-background p-4
                  shadow-[4px_4px_8px_#c5c5c5,-4px_-4px_8px_#ffffff] transition-all duration-300
                  hover:shadow-[6px_6px_12px_#c5c5c5,-6px_-6px_12px_#ffffff]
                  active:shadow-[inset_2px_2px_6px_#c5c5c5,inset_-2px_-2px_6px_#ffffff]
                  dark:shadow-[4px_4px_8px_#0d0d0d,-4px_-4px_8px_#272727]
                  dark:hover:shadow-[6px_6px_12px_#0d0d0d,-6px_-6px_12px_#272727]
                  dark:active:shadow-[inset_2px_2px_6px_#0d0d0d,inset_-2px_-2px_6px_#272727]
                "
                @click="openLink('https://github.com/sankeyangshu/starter-template-vue/generate')"
              >
                <SvgIcon
                  icon="mdi:github"
                  class="
                    text-2xl text-gray-600
                    dark:text-gray-400
                  "
                />
                <span
                  class="
                    text-xs font-medium text-gray-700
                    dark:text-gray-300
                  "
                >
                  åˆ›å»ºä»“åº“
                </span>
              </div>

              <!-- å…‹éš†ä»“åº“æŒ‰é’® -->
              <div
                class="
                  group/btn relative flex cursor-pointer flex-col items-center gap-2 rounded-lg
                  border border-background bg-background p-4
                  shadow-[4px_4px_8px_#c5c5c5,-4px_-4px_8px_#ffffff] transition-all duration-300
                  hover:shadow-[6px_6px_12px_#c5c5c5,-6px_-6px_12px_#ffffff]
                  active:shadow-[inset_2px_2px_6px_#c5c5c5,inset_-2px_-2px_6px_#ffffff]
                  dark:shadow-[4px_4px_8px_#0d0d0d,-4px_-4px_8px_#272727]
                  dark:hover:shadow-[6px_6px_12px_#0d0d0d,-6px_-6px_12px_#272727]
                  dark:active:shadow-[inset_2px_2px_6px_#0d0d0d,inset_-2px_-2px_6px_#272727]
                "
                @click="copyToClipboard('git clone https://github.com/sankeyangshu/starter-template-vue.git', 'clone')"
              >
                <SvgIcon
                  icon="mdi:git"
                  class="
                    text-2xl text-gray-600
                    dark:text-gray-400
                  "
                />
                <span
                  class="
                    text-xs font-medium text-gray-700
                    dark:text-gray-300
                  "
                >
                  å…‹éš†ä»“åº“
                </span>
                <span
                  v-if="copiedText === 'clone'"
                  class="
                    absolute -top-2 -right-2 rounded-full bg-primary px-2 py-0.5 text-xs text-white
                  "
                >
                  âœ“
                </span>
              </div>
            </div>
          </div>

          <!-- åŠŸèƒ½ç‰¹æ€§å¡ç‰‡ -->
          <div
            class="
              group rounded-3xl border border-background bg-background p-6
              shadow-[6px_6px_12px_#c5c5c5,-6px_-6px_12px_#ffffff] transition-all duration-300
              hover:shadow-[8px_8px_16px_#c5c5c5,-8px_-8px_16px_#ffffff]
              dark:shadow-[6px_6px_12px_#0d0d0d,-6px_-6px_12px_#272727]
              dark:hover:shadow-[8px_8px_16px_#0d0d0d,-8px_-8px_16px_#272727]
            "
          >
            <h2
              class="
                mb-4 flex items-center gap-2 text-xl font-semibold text-gray-800
                dark:text-gray-100
              "
            >
              <span class="text-2xl">ğŸ’</span>
              æ ¸å¿ƒç‰¹æ€§
            </h2>
            <ul
              class="
                space-y-2 text-sm text-gray-600
                dark:text-gray-400
              "
            >
              <li class="flex items-start gap-2">
                <span class="text-primary">âœ“</span>
                <span>åŸºäºæ–‡ä»¶çš„è·¯ç”±ç³»ç»Ÿ</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-primary">âœ“</span>
                <span>å®Œå–„çš„ TypeScript ç±»å‹æ”¯æŒ</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-primary">âœ“</span>
                <span>å¼€ç®±å³ç”¨çš„çŠ¶æ€ç®¡ç†</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-primary">âœ“</span>
                <span>å“åº”å¼è®¾è®¡ä¸ä¸»é¢˜åˆ‡æ¢</span>
              </li>
            </ul>
          </div>

          <!-- æ—¶é—´å¡ç‰‡ -->
          <div
            class="
              group rounded-3xl border border-background bg-background p-6
              shadow-[6px_6px_12px_#c5c5c5,-6px_-6px_12px_#ffffff] transition-all duration-300
              hover:shadow-[8px_8px_16px_#c5c5c5,-8px_-8px_16px_#ffffff]
              dark:shadow-[6px_6px_12px_#0d0d0d,-6px_-6px_12px_#272727]
              dark:hover:shadow-[8px_8px_16px_#0d0d0d,-8px_-8px_16px_#272727]
            "
          >
            <div class="text-center">
              <div
                class="
                  text-4xl font-bold text-gray-800
                  dark:text-gray-100
                "
              >
                {{ formattedTime }}
              </div>
              <div
                class="
                  mt-2 text-sm text-gray-600
                  dark:text-gray-400
                "
              >
                {{ formattedDate }}
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- åº•éƒ¨é“¾æ¥å¡ç‰‡ -->
      <div
        class="
          mt-6 grid grid-cols-1 gap-6
          sm:grid-cols-2
          lg:grid-cols-3
        "
      >
        <div
          v-for="item in links"
          :key="item.title"
          class="
            group cursor-pointer rounded-3xl border border-background bg-background p-6
            shadow-[6px_6px_12px_#c5c5c5,-6px_-6px_12px_#ffffff] transition-all duration-300
            hover:shadow-[8px_8px_16px_#c5c5c5,-8px_-8px_16px_#ffffff]
            active:shadow-[inset_4px_4px_12px_#c5c5c5,inset_-4px_-4px_12px_#ffffff]
            dark:shadow-[6px_6px_12px_#0d0d0d,-6px_-6px_12px_#272727]
            dark:hover:shadow-[8px_8px_16px_#0d0d0d,-8px_-8px_16px_#272727]
            dark:active:shadow-[inset_4px_4px_12px_#0d0d0d,inset_-4px_-4px_12px_#272727]
          "
          @click="openLink(item.link)"
        >
          <div class="text-center">
            <div class="mb-3 flex justify-center">
              <SvgIcon
                :icon="item.icon"
                class="
                  text-4xl text-gray-700
                  dark:text-gray-300
                "
              />
            </div>
            <h3
              class="
                mb-1 font-semibold text-gray-800
                dark:text-gray-100
              "
            >
              {{ item.title }}
            </h3>
            <p
              class="
                text-sm text-gray-600
                dark:text-gray-400
              "
            >
              {{ item.desc }}
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script lang="ts" setup>
import { format } from 'date-fns';
import { zhCN } from 'date-fns/locale';
import { computed, onBeforeUnmount, ref } from 'vue';
import SvgIcon from '@/components/custom/svg-icon.vue';
import SwitchDark from '@/components/custom/switch-dark.vue';
import { cn } from '@/lib/utils';

defineOptions({
  name: 'Home',
});

const currentTime = ref(new Date());
const copiedText = ref('');

// å®šæ—¶å™¨æ›´æ–°æ—¶é—´
const timer = setInterval(() => {
  currentTime.value = new Date();
}, 1000);

// ç»„ä»¶å¸è½½æ—¶æ¸…é™¤å®šæ—¶å™¨
onBeforeUnmount(() => {
  clearInterval(timer);
});

// å¤åˆ¶åˆ°å‰ªè´´æ¿
async function copyToClipboard(text: string, label: string) {
  try {
    await navigator.clipboard.writeText(text);
    copiedText.value = label;
    setTimeout(() => {
      copiedText.value = '';
    }, 2000);
  } catch (err) {
    console.error('å¤åˆ¶å¤±è´¥:', err);
  }
}

// æ‰“å¼€é“¾æ¥
function openLink(url: string) {
  window.open(url, '_blank');
}

// è®¡ç®—é—®å€™è¯­
const greeting = computed(() => {
  const currentHour = currentTime.value.getHours();
  if (currentHour < 12) {
    return 'Good Morning';
  } else if (currentHour < 18) {
    return 'Good Afternoon';
  } else {
    return 'Good Evening';
  }
});

// æ ¼å¼åŒ–æ—¶é—´
const formattedTime = computed(() => {
  return format(currentTime.value, 'HH:mm');
});

// æ ¼å¼åŒ–æ—¥æœŸ
const formattedDate = computed(() => {
  return format(currentTime.value, 'yyyyå¹´Mæœˆdæ—¥ EEEE', { locale: zhCN });
});

// ç‰¹æ€§æ ‡ç­¾
const tags = [
  'âš¡ Vite',
  'âš›ï¸ Vue',
  'ğŸ¨ Tailwind CSS',
  'ğŸ“¦ TypeScript',
  'ğŸŒ“ Dark Mode',
  'ğŸŒ i18n',
  'ğŸ—‚ï¸ Pinia',
  'ğŸš¦ Vue Router',
];

// åº•éƒ¨é“¾æ¥
const links = [
  {
    icon: 'mdi:book-open-page-variant',
    title: 'æ–‡æ¡£',
    desc: 'æŸ¥çœ‹å®Œæ•´æ–‡æ¡£',
    link: 'https://lemon-template-docs.vercel.app/vue/',
  },
  {
    icon: 'mdi:github',
    title: 'GitHub',
    desc: 'è®¿é—®æºä»£ç ',
    link: 'https://github.com/sankeyangshu/starter-template-vue',
  },
  {
    icon: 'mdi:message-alert',
    title: 'åé¦ˆ',
    desc: 'æäº¤é—®é¢˜åé¦ˆ',
    link: 'https://github.com/sankeyangshu/starter-template-vue/issues',
  },
];
</script>
